{"version":3,"file":"js/4692.1662470378881.b93d6efeed972f8a8ee6.js","mappings":"sHAOO,MAAMA,EAAqC,CAAOC,EAAQC,KAAY,O,OAAD,E,OAAA,E,EAAA,YAC1E,IACE,aAAcC,MAAM,GAAGF,EAAS,QAAU,WAAWC,mBAAyBE,OAC9E,MAAOC,GAGP,OADAC,QAAQC,MAAM,8BAA+BF,GACtC,K,YANiE,K,6pBCH5E,MAAMG,EAAwD,CAC5D,sCAAuC,IAAY,OAAD,6BAAC,UAAM,EAAQ,UACjE,gCAAiC,IAAY,OAAD,6BAAC,UAAM,EAAQ,UAC3D,yBAA0B,IAAY,OAAD,6BAAC,UAAM,EAAQ,UACpD,0BAA2B,IAAY,OAAD,6BAAC,UAAM,EAAQ,UACrDC,MAAO,IAAY,OAAD,6BAAC,UAAM,EAAQ,UACjCC,MAAO,IAAY,OAAD,6BAAC,UAAM,EAAQ,UACjC,eAAgB,IAAY,OAAD,6BAAC,UAAM,EAAQ,UAC1C,gBAAiB,IAAY,OAAD,6BAAC,UAAM,EAAQ,UAC3C,uBAAwB,IAAY,OAAD,6BAAC,UAAM,EAAQ,UAClD,cAAe,IAAY,OAAD,6BAAC,UAAM,EAAQ,SACzC,eAAgB,IAAY,OAAD,6BAAC,UAAM,EAAQ,UAC1C,mBAAoB,IAAY,OAAD,6BAAC,UAAM,EAAQ,WAG1CC,EAAcC,OAAOC,KAAKL,GAASM,QACvC,CAACC,EAAKC,IAAmB,OAAD,wBACnBD,GAAG,CACN,CAACC,GAAgB,CAGf,IAAK,CACHC,IAAKT,EAAQQ,GAEbE,QAAQ,OAId,IAGWC,EAAc,KACzB,MAIMC,EAAe,IAAI,EAAAC,aAAa,CAAEC,UAJY,CAACC,EAAKC,IACjDrB,MAAMoB,EAAKC,GAG+Bb,YAAAA,IACnDS,EAAaK,8BACb,MAAMC,EAAc,IAAI,EAAAC,YAQxB,OAPAD,EAAYE,UAAUR,IACtB,QAAiB,EAAM,QAA8BS,MAAMC,IACzDA,EAAKC,SAAQ,EAAGC,KAAMC,EAAMC,WAAAA,EAAa,mBACvC,MAAMX,EAAM,QAAQW,KAAcD,KAClCP,EAAYS,WAAWZ,SAGpBG,GAEIA,EAAcP,K","sources":["webpack:///./src/Utils/plugins.ts","webpack:///./src/sdk/createStore.ts"],"sourcesContent":["export type PluginType = {\n  name: string;\n  pathPrefix?: string;\n};\n\ntype GetActivePlugins = (isBeta: boolean, appName: string) => Promise<PluginType[]>;\n\nexport const getActivePlugins: GetActivePlugins = async (isBeta, appName) => {\n  try {\n    return (await fetch(`${isBeta ? '/beta' : ''}/apps/${appName}/plugins.json`)).json();\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error('Failed to fetch plugin data', e);\n    return [];\n  }\n};\n","import { getActivePlugins } from '../Utils/plugins';\nimport packageInfo from '../../package.json';\nimport { PluginLoader, PluginLoaderOptions, PluginStore } from '@openshift/dynamic-plugin-sdk';\n\nconst modules: { [name: string]: () => Promise<() => any> } = {\n  '@openshift/dynamic-plugin-sdk-utils': async () => () => require('@openshift/dynamic-plugin-sdk-utils'),\n  '@openshift/dynamic-plugin-sdk': async () => () => require('@openshift/dynamic-plugin-sdk'),\n  '@patternfly/react-core': async () => () => require('@patternfly/react-core'),\n  '@patternfly/react-table': async () => () => require('@patternfly/react-table'),\n  react: async () => () => require('react'),\n  redux: async () => () => require('redux'),\n  'react-helmet': async () => () => require('react-helmet'),\n  'react-i18next': async () => () => require('react-i18next'),\n  '@scalprum/react-core': async () => () => require('@scalprum/react-core'),\n  'react-redux': async () => () => require('react-redux'),\n  'react-router': async () => () => require('react-router'),\n  'react-router-dom': async () => () => require('react-router-dom'),\n};\n\nconst sharedScope = Object.keys(modules).reduce(\n  (acc, moduleRequest) => ({\n    ...acc,\n    [moduleRequest]: {\n      // The '*' semver range means \"this shared module matches all requested versions\",\n      // i.e. make sure the plugin always uses the Console-provided shared module version\n      '*': {\n        get: modules[moduleRequest],\n        // Indicates that Console has already loaded the shared module\n        loaded: true,\n      },\n    },\n  }),\n  {},\n);\n\nexport const createStore = () => {\n  const fetchImpl: PluginLoaderOptions['fetchImpl'] = (url, requestInit) => {\n    return fetch(url, requestInit);\n  };\n\n  const pluginLoader = new PluginLoader({ fetchImpl, sharedScope });\n  pluginLoader.registerPluginEntryCallback();\n  const pluginStore = new PluginStore();\n  pluginStore.setLoader(pluginLoader);\n  getActivePlugins(true, packageInfo.insights.appname).then((data) => {\n    data.forEach(({ name: item, pathPrefix = '/api/plugins' }) => {\n      const url = `/beta${pathPrefix}/${item}/`;\n      pluginStore.loadPlugin(url);\n    });\n  });\n  return pluginStore;\n};\nexport const pluginStore = createStore();\n"],"names":["getActivePlugins","isBeta","appName","fetch","json","e","console","error","modules","react","redux","sharedScope","Object","keys","reduce","acc","moduleRequest","get","loaded","createStore","pluginLoader","PluginLoader","fetchImpl","url","requestInit","registerPluginEntryCallback","pluginStore","PluginStore","setLoader","then","data","forEach","name","item","pathPrefix","loadPlugin"],"sourceRoot":""}