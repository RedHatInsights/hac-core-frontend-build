{"version":3,"file":"js/TestK8s.1665500962182.cc9caf53076ac632ad1c.js","mappings":"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","sources":["webpack:///./src/Routes/testK8s/PrintObject.tsx","webpack:///./src/Routes/testK8s/WSLoadingState.tsx","webpack:///./src/Routes/testK8s/models.ts","webpack:///./src/Routes/testK8s/WSTest.tsx","webpack:///./src/Routes/testK8s/FetchTest.tsx","webpack:///./src/Utils/types.ts","webpack:///./src/Routes/testK8s/DetermineNamespace.tsx","webpack:///./src/Routes/testK8s/HookTest.tsx","webpack:///./src/Routes/testK8s/TestK8s.tsx"],"sourcesContent":["import * as React from 'react';\nimport { K8sResourceCommon } from '@openshift/dynamic-plugin-sdk-utils';\n\ntype PrintObjectProps = {\n  object: K8sResourceCommon;\n};\n\nconst PrintObject: React.FC<PrintObjectProps> = ({ object }) => {\n  const [expanded, setExpanded] = React.useState(false);\n\n  const sanitize = (resourceOrResourceList: K8sResourceCommon): K8sResourceCommon => {\n    const {\n      // @ts-ignore add `managedFields` to K8sResourceCommon\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      metadata: { managedFields, ...metadata }, // drop managedFields\n      ...resource\n    } = resourceOrResourceList;\n\n    return {\n      metadata,\n      ...resource,\n    };\n  };\n\n  if (!object) {\n    return <div>No Object to Report</div>;\n  }\n\n  return (\n    <pre style={{ overflow: 'hidden', maxHeight: expanded ? undefined : 150, position: 'relative', paddingTop: 25 }}>\n      {JSON.stringify(sanitize(object), null, 2)}\n      {expanded ? (\n        <div onClick={() => setExpanded(false)} style={{ cursor: 'pointer', top: 0, width: '100%', position: 'absolute', textAlign: 'center' }}>\n          (Click to collapse)\n        </div>\n      ) : (\n        <div\n          onClick={() => setExpanded(true)}\n          style={{\n            cursor: 'pointer',\n            background: 'linear-gradient(transparent, gray)',\n            bottom: 0,\n            width: '100%',\n            height: '100%',\n            position: 'absolute',\n            textAlign: 'center',\n          }}\n        >\n          (Click to expand)\n        </div>\n      )}\n    </pre>\n  );\n};\n\nexport default PrintObject;\n","import * as React from 'react';\nimport { Spinner } from '@patternfly/react-core';\n\ntype WSLoadingStateProps = {\n  socketBeingCreated: boolean;\n  socketOpen: boolean;\n  resourceLoaded: boolean;\n};\n\nconst WSLoadingState: React.FC<WSLoadingStateProps> = ({ socketBeingCreated, socketOpen, resourceLoaded }) => {\n  if (!socketBeingCreated) {\n    return null;\n  }\n  if (socketOpen) {\n    if (resourceLoaded) {\n      return null;\n    }\n\n    return <p>Socket Open.</p>;\n  }\n\n  return <Spinner />;\n};\n\nexport default WSLoadingState;\n","import { K8sModelCommon } from '@openshift/dynamic-plugin-sdk-utils';\n\nexport const ApplicationModel: K8sModelCommon = {\n  apiVersion: 'v1alpha1',\n  kind: 'Application',\n  apiGroup: 'appstudio.redhat.com',\n  plural: 'applications',\n};\n","/* eslint-disable no-console */\nimport * as React from 'react';\nimport { getK8sResourceURL, WebSocketFactory } from '@openshift/dynamic-plugin-sdk-utils';\nimport PrintObject from './PrintObject';\nimport { Alert, Button, Title } from '@patternfly/react-core';\nimport WSLoadingState from './WSLoadingState';\nimport { ApplicationModel } from './models';\n\ntype WSTestProps = {\n  namespace: string;\n};\n\nconst WSTest: React.FC<WSTestProps> = ({ namespace }) => {\n  const [r, setR] = React.useState(null);\n  const [error, setError] = React.useState<string | null>(null);\n  const [isOpen, setOpen] = React.useState(false);\n  const [path, setPath] = React.useState<string>();\n\n  React.useEffect(() => {\n    if (path) {\n      let safePath = path;\n      if (/^\\/\\//.test(path)) {\n        // https://github.com/openshift/dynamic-plugin-sdk/pull/55\n        safePath = path.slice(1);\n      }\n      const ws = new WebSocketFactory('sample websocket', {\n        path: safePath,\n      });\n      ws.onOpen(() => {\n        setOpen(true);\n      });\n      ws.onError((data) => {\n        console.debug('error', data);\n      });\n      ws.onMessage((dataStringOrObject) => {\n        try {\n          let data;\n          if (typeof dataStringOrObject === 'string') {\n            data = JSON.parse(dataStringOrObject);\n          } else {\n            data = dataStringOrObject;\n          }\n          const { type, object } = data || {}; // current structure\n          switch (type) {\n            case 'DELETED':\n              setR(null);\n              break;\n            default:\n              setR(object);\n          }\n          console.debug('message', type, object);\n        } catch (e) {\n          console.error('>>> Web Socket Data Bad', e);\n          setError('Web Socket data unknown structure');\n          return;\n        }\n      });\n      ws.onClose((data) => {\n        setOpen(false);\n        setR(null);\n        setPath(undefined);\n        // https://www.rfc-editor.org/rfc/rfc6455#section-11.7\n        // 1006: https://stackoverflow.com/a/19305172\n        console.debug('close', data, 'code:', data.code);\n      });\n      return () => {\n        ws.destroy();\n      };\n    }\n  }, [path]);\n\n  return (\n    <>\n      <Title headingLevel=\"h2\" size=\"xl\">\n        Websockets\n      </Title>\n      <p>Needs a created Application to successfully return details.</p>\n      {!path &&\n        (namespace ? (\n          <>\n            <p>Create Web Socket Connection to:</p>\n            <Button\n              onClick={() => {\n                setPath(getK8sResourceURL(ApplicationModel, undefined, { ns: namespace }));\n              }}\n              variant=\"primary\"\n            >\n              Applications\n            </Button>\n          </>\n        ) : (\n          <p>Need a namespace</p>\n        ))}\n      <WSLoadingState socketBeingCreated={!!path} socketOpen={isOpen} resourceLoaded={!!r} />\n      {isOpen && !r && <p>No response -- did you create the Application?</p>}\n      {error && (\n        <Alert variant=\"danger\" title=\"Websocket Error\">\n          {error}\n        </Alert>\n      )}\n      {r && <PrintObject object={r} />}\n    </>\n  );\n};\n\nexport default WSTest;\n","/* eslint-disable no-console */\nimport * as React from 'react';\nimport { Button, TextInput, Title } from '@patternfly/react-core';\nimport {\n  k8sCreateResource,\n  k8sDeleteResource,\n  k8sGetResource,\n  k8sPatchResource,\n  K8sResourceCommon,\n  k8sUpdateResource,\n} from '@openshift/dynamic-plugin-sdk-utils';\nimport { ApplicationModel } from './models';\n\nimport PrintObject from './PrintObject';\n\n// eslint-disable-next-line no-shadow\nenum ActionType {\n  CREATE = 'create',\n  GET = 'get',\n  PATCH = 'patch',\n  PUT = 'put',\n  DELETE = 'delete',\n}\n\ntype FetchTestProps = {\n  namespace: string;\n};\n\nconst FetchTest: React.FC<FetchTestProps> = ({ namespace }) => {\n  const [r, setR] = React.useState<K8sResourceCommon>();\n  const [name, setName] = React.useState<string>('test');\n  const [status, setStatus] = React.useState<string>('');\n  const [action, setAction] = React.useState<ActionType | undefined | null>(null);\n  const [resourceVersion, setResourceVersion] = React.useState<string>();\n\n  React.useEffect(() => {\n    const testApplicationMetadata = {\n      name,\n      ns: namespace,\n    };\n    const testApplicationData: K8sResourceCommon & { [key: string]: any } = {\n      apiVersion: `${ApplicationModel.apiGroup}/${ApplicationModel.apiVersion}`,\n      kind: ApplicationModel.kind,\n      metadata: {\n        name,\n        namespace,\n      },\n    };\n\n    let promise = null;\n    switch (action) {\n      case ActionType.CREATE:\n        promise = k8sCreateResource({\n          model: ApplicationModel,\n          queryOptions: testApplicationMetadata,\n          resource: testApplicationData,\n        });\n        break;\n      case ActionType.GET:\n        promise = k8sGetResource({\n          model: ApplicationModel,\n          queryOptions: testApplicationMetadata,\n        }).then((data) => {\n          setResourceVersion(data?.metadata?.resourceVersion);\n          return data;\n        });\n        break;\n      case ActionType.PATCH:\n        promise = k8sPatchResource({\n          model: ApplicationModel,\n          queryOptions: testApplicationMetadata,\n          patches: [\n            {\n              op: 'replace',\n              path: '/test',\n              value: 'false',\n            },\n          ],\n        });\n        break;\n      case ActionType.PUT:\n        promise = k8sUpdateResource({\n          model: ApplicationModel,\n          queryOptions: testApplicationMetadata,\n          resource: {\n            ...testApplicationData,\n            metadata: {\n              ...testApplicationData.metadata,\n              resourceVersion,\n            },\n          },\n        }).then((data) => {\n          setResourceVersion(data?.metadata?.resourceVersion);\n          return data;\n        });\n        break;\n      case ActionType.DELETE:\n        promise = k8sDeleteResource({\n          model: ApplicationModel,\n          queryOptions: testApplicationMetadata,\n        });\n        break;\n      case null:\n        // ignore effect\n        break;\n      default:\n        // this shouldn't happen, catch state for missed cases\n        throw new Error('uh oh!');\n    }\n    promise\n      ?.then((data) => {\n        setStatus(`${action} response:`);\n        setR(data);\n        console.debug(`++++${action}!`, data);\n      })\n      .catch((err) => {\n        console.error(`++++failed ${action}`, err);\n        setStatus(`failed call: ${err.message}`);\n        setR(undefined);\n      })\n      .finally(() => {\n        setAction(undefined); // prevent the hook for re-firing on name change\n      });\n  }, [action, name, namespace, resourceVersion]);\n\n  return (\n    <>\n      <Title headingLevel=\"h2\" size=\"xl\">\n        Fetch Calls\n      </Title>\n      <TextInput placeholder=\"Application name\" onChange={(v) => setName(v)} value={name} />\n      <div>\n        <p>Test calls -- predefined data; use the above input to make/update/get multiple Applications</p>\n        {Object.values(ActionType).map((v) => (\n          <React.Fragment key={v}>\n            <Button isDisabled={v === ActionType.PUT && resourceVersion === null} onClick={() => setAction(v)}>\n              {v}\n            </Button>{' '}\n          </React.Fragment>\n        ))}\n      </div>\n      <div>{status}</div>\n      {r && <PrintObject object={r} />}\n    </>\n  );\n};\n\nexport default FetchTest;\n","import type { K8sModelCommon } from '@openshift/dynamic-plugin-sdk-utils';\n\nexport const ProjectModel: K8sModelCommon = {\n  apiVersion: 'v1',\n  apiGroup: 'project.openshift.io',\n  kind: 'Project',\n  plural: 'projects',\n};\n","import * as React from 'react';\nimport { isUtilsConfigSet, k8sListResourceItems } from '@openshift/dynamic-plugin-sdk-utils';\nimport { Alert, Spinner } from '@patternfly/react-core';\nimport { ProjectModel } from '../../Utils/types';\n\ntype DetermineNamespaceProps = {\n  namespace?: string;\n  setNamespace: (namespace: string) => void;\n};\n\nconst DetermineNamespace: React.FC<DetermineNamespaceProps> = ({ namespace, setNamespace }) => {\n  const [error, setError] = React.useState<string>();\n\n  const hasConfig = isUtilsConfigSet();\n  React.useEffect(() => {\n    if (hasConfig) {\n      k8sListResourceItems({\n        model: ProjectModel,\n      })\n        .then((items) => {\n          const ns = items[0]?.metadata?.name;\n\n          if (ns) {\n            setNamespace(ns);\n          } else {\n            setError('Could not find namespace; you are likely not able to do much as we are targeting \"default\"');\n          }\n        })\n        .catch((e) => {\n          setError(`Unknown issue loading namespace ${e?.message}`);\n        });\n    }\n  }, [hasConfig, setNamespace]);\n\n  if (error) {\n    return (\n      <Alert variant=\"danger\" isInline title=\"Determining Namespace Error\">\n        {error}\n      </Alert>\n    );\n  }\n\n  return namespace ? (\n    <p>Current namespace: {namespace}</p>\n  ) : (\n    <>\n      <Spinner /> Loading Namespace\n    </>\n  );\n};\n\nexport default DetermineNamespace;\n","/* eslint-disable no-console */\nimport * as React from 'react';\nimport { Title, TextInput, TextContent, Text, TextVariants } from '@patternfly/react-core';\nimport { useK8sWatchResource, useK8sWatchResources } from '@openshift/dynamic-plugin-sdk-utils';\n\n/* This component is currently used to verify the useK8sWatchResource hook. */\n\ntype HookTestProps = {\n  namespace: string;\n};\n\nconst HookTest: React.FC<HookTestProps> = ({ namespace }) => {\n  const [name, setName] = React.useState<string>('test');\n\n  // Resource to test the useK8sWatchResource hook\n  const watchedResource = {\n    isList: false,\n    groupVersionKind: {\n      group: 'appstudio.redhat.com',\n      version: 'v1alpha1',\n      kind: 'Application',\n    },\n    name,\n    namespace,\n  };\n\n  // Resource to test the useK8sWatchResources hook\n  const watchedResources = {\n    application: {\n      isList: false,\n      groupVersionKind: {\n        group: 'appstudio.redhat.com',\n        version: 'v1alpha1',\n        kind: 'Application',\n      },\n      name,\n      namespace,\n    },\n  };\n\n  const [data, loaded, error] = useK8sWatchResource(watchedResource);\n  const isResourceLoaded = loaded || !!error;\n  if (isResourceLoaded) {\n    console.log('data from useK8sWatchResource: ', data);\n  }\n\n  const { application } = useK8sWatchResources(watchedResources);\n  const isAppResourceLoaded = application.loaded || !!application.loadError;\n  const { data: appResourceData } = application;\n  if (isAppResourceLoaded) {\n    console.log('data from useK8sWatchResources: ', appResourceData);\n  }\n\n  return (\n    <>\n      <Title headingLevel=\"h2\" size=\"xl\">\n        Test hooks to watch Application\n      </Title>\n      <TextInput placeholder=\"Application name\" onChange={(v) => setName(v)} value={name} />\n      <TextContent>\n        <Text component={TextVariants.h4}>useK8sWatchResource (watch Application: {name})</Text>\n        {!isResourceLoaded && <Text component={TextVariants.p}>Loading resource...</Text>}\n        {isResourceLoaded && data && <Text component={TextVariants.p}>Resource loaded</Text>}\n        {isResourceLoaded && !data && <Text component={TextVariants.p}>No data -- did you create the Application?</Text>}\n      </TextContent>\n      <br />\n      <TextContent>\n        <Text component={TextVariants.h4}>useK8sWatchResources (watch Application: {name})</Text>\n        {!isAppResourceLoaded && <Text component={TextVariants.p}>Loading resource...</Text>}\n        {isAppResourceLoaded && appResourceData && <Text component={TextVariants.p}>Resource loaded</Text>}\n        {isAppResourceLoaded && !appResourceData && <Text component={TextVariants.p}>No data -- did you create the Application?</Text>}\n      </TextContent>\n    </>\n  );\n};\n\nexport default HookTest;\n","/* eslint-disable no-console */\nimport * as React from 'react';\nimport { PageSection } from '@patternfly/react-core';\nimport WSTest from './WSTest';\nimport FetchTest from './FetchTest';\nimport DetermineNamespace from './DetermineNamespace';\nimport HookTest from './HookTest';\n\nconst TestK8s: React.FC = () => {\n  const [namespace, setNamespace] = React.useState<string>();\n\n  return (\n    <PageSection>\n      <DetermineNamespace namespace={namespace} setNamespace={setNamespace} />\n      {namespace && (\n        <>\n          <hr style={{ margin: 20 }} />\n          <FetchTest namespace={namespace} />\n          <hr style={{ margin: 20 }} />\n          <HookTest namespace={namespace} />\n          <hr style={{ margin: 20 }} />\n          <WSTest namespace={namespace} />\n        </>\n      )}\n    </PageSection>\n  );\n};\n\nexport default TestK8s;\n"],"names":["object","expanded","setExpanded","style","overflow","maxHeight","undefined","position","paddingTop","JSON","stringify","resourceOrResourceList","managedFields","metadata","resource","sanitize","onClick","cursor","top","width","textAlign","background","bottom","height","socketBeingCreated","socketOpen","resourceLoaded","Spinner","ApplicationModel","apiVersion","kind","apiGroup","plural","namespace","r","setR","error","setError","isOpen","setOpen","path","setPath","safePath","test","slice","ws","WebSocketFactory","onOpen","onError","data","console","debug","onMessage","dataStringOrObject","parse","type","e","onClose","code","destroy","Title","headingLevel","size","Button","getK8sResourceURL","ns","variant","Alert","title","ActionType","name","setName","status","setStatus","action","setAction","resourceVersion","setResourceVersion","testApplicationMetadata","testApplicationData","promise","CREATE","k8sCreateResource","model","queryOptions","GET","k8sGetResource","then","PATCH","k8sPatchResource","patches","op","value","PUT","k8sUpdateResource","DELETE","k8sDeleteResource","Error","catch","err","message","finally","TextInput","placeholder","onChange","v","Object","values","map","key","isDisabled","ProjectModel","setNamespace","hasConfig","isUtilsConfigSet","k8sListResourceItems","items","isInline","watchedResource","isList","groupVersionKind","group","version","watchedResources","application","loaded","useK8sWatchResource","isResourceLoaded","log","useK8sWatchResources","isAppResourceLoaded","loadError","appResourceData","TextContent","Text","component","TextVariants","PageSection","margin"],"sourceRoot":""}