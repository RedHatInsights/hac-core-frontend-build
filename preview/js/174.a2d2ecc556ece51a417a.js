(self.webpackChunkhacCore=self.webpackChunkhacCore||[]).push([[174],{8174:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PrefetchContext:()=>f,PrefetchProvider:()=>p,ScalprumComponent:()=>E,ScalprumContext:()=>h,ScalprumProvider:()=>k,default:()=>k,useLoadModule:()=>R,useModule:()=>O,usePrefetch:()=>_,useScalprum:()=>d});var r=n(2747),o=n.n(r),a=n(1120),u=n(8446),c=n.n(u);function i(e,t){return n=this,r=void 0,u=function(){var n,r,o;return function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(u){switch(u.label){case 0:return n=(0,a.getScalprum)().pluginStore,r=void 0,o=(0,a.getCachedModule)(e,t).cachedModule,(r=o)?[3,2]:[4,n.getExposedModule(e,t)];case 1:r=u.sent(),u.label=2;case 2:return[2,{prefetch:r.prefetch,component:r.default}]}}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{i(u.next(e))}catch(e){t(e)}}function c(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,c)}i((u=u.apply(n,r||[])).next())}));var n,r,o,u}var l=function(e){var t=e.error,n=e.errorInfo;return function(e){return(null==e?void 0:e.cause)&&"object"==typeof e.cause}(t)?o().createElement(l,{error:t.cause,errorInfo:n}):o().createElement("div",null,o().createElement("h2",null,"Error loading component"),"string"==typeof t&&o().createElement("p",null,t),(null==t?void 0:t.cause)&&o().createElement("p",null,t.cause),(null==t?void 0:t.message)&&o().createElement("p",null,t.message),(null==n?void 0:n.componentStack)?o().createElement("pre",null,null==n?void 0:n.componentStack):(null==t?void 0:t.stack)&&o().createElement("pre",null,t.stack))};const s=l;var f=(0,r.createContext)(void 0),p=function(e){var t=e.children,n=e.prefetchPromise;return o().createElement(f.Provider,{value:n},t)},h=(0,r.createContext)({initialized:!1,config:{},api:{},pluginStore:{}});function d(e){var t=(0,r.useContext)(h);return"function"==typeof e?e(t):t}var v,y=(v=function(e,t){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},v(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},m.apply(this,arguments)},b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},g=function(e){var t=e.fallback,n=void 0===t?"loading":t,u=e.scope,c=e.module,l=e.ErrorComponent,s=e.processor,f=e.innerRef,h=e.skipCache,v=void 0!==h&&h,y=b(e,["fallback","scope","module","ErrorComponent","processor","innerRef","skipCache"]),g=(0,a.getAppData)(u).manifestLocation,w=(0,r.useReducer)((function(e){return e+1}),0),E=w[0],S=w[1],P=(0,r.useState)(void 0),k=P[0],x=P[1],C=(0,r.useState)(),O=C[0],M=C[1],j=(0,r.useState)(),R=j[0],A=j[1];if(R)throw R;var L=d();(0,r.useEffect)((function(){var e=u+"#"+c,t=(0,a.getCachedModule)(u,c),n=t.cachedModule,r=t.prefetchPromise;M(r);var f,p=!0,h=function(e){p&&(A(e),x((function(){return function(t){return o().createElement(l,m({error:e},t))}})))},d=(0,a.getPendingLoading)(u,c);if(!n&&d)d.finally((function(){S()}));else if(n)try{if(p&&x((function(){return n.default})),f=n.prefetch){var v=(0,a.getPendingPrefetch)(e)||f(L);M(v),(0,a.handlePrefetchPromise)(e,v)}}catch(e){h(e)}else if(g){var y=(0,a.processManifest)(g,u,c,s).then((function(){return f=function(e,t,n,r){return o=this,a=void 0,c=function(){var o,a,u;return function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(c){switch(c.label){case 0:return[4,i(e,t)];case 1:return o=c.sent(),a=o.prefetch,u=o.component,n&&r((function(){return u})),[2,a]}}))},new((u=void 0)||(u=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof u?o:new u((function(e){e(o)}))).then(n,r)}i((c=c.apply(o,a||[])).next())}));var o,a,u,c}(u,c,p,x),f.then((function(t){if(t){var n=(0,a.getPendingPrefetch)(e)||t(L);M(n),(0,a.handlePrefetchPromise)(e,n)}})),f})).catch(h);(0,a.setPendingLoading)(u,c,y)}return function(){p=!1,A(void 0)}}),[u,v,E]);var _=(0,r.useRef)(!1);return(0,r.useEffect)((function(){_.current&&M(void 0),_.current=!0}),[u,c]),o().createElement(p,{prefetchPromise:O},o().createElement(r.Suspense,{fallback:n},k?o().createElement(k,m({ref:f},y)):n))},w=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasError:!1},n.selfRepairAttempt=!1,n}return y(t,e),t.getDerivedStateFromError=function(){return{hasError:!0}},t.prototype.shouldComponentUpdate=function(e,t){return this.state.hasError!==t.hasError||!c()(e,this.props)||!c()(t,this.state)},t.prototype.componentDidCatch=function(e,t){!0===this.selfRepairAttempt?(console.error("Scalprum encountered an error!",(null==e?void 0:e.cause)||e.message,e),this.setState({error:e,errorInfo:t})):(console.warn("Scalprum failed to render component. Attempting to skip module cache."),this.setState({repairAttempt:!0}))},t.prototype.render=function(){var e=this,t=this.props,n=t.ErrorComponent,r=void 0===n?o().createElement(s,m({},this.state)):n,a=b(t,["ErrorComponent"]),u=function(t){return o().cloneElement(r,m(m({},e.state),t))};return this.state.repairAttempt&&!this.selfRepairAttempt?(this.selfRepairAttempt=!0,o().createElement(g,m({},a,{skipCache:!0,ErrorComponent:u}))):this.state.hasError&&this.selfRepairAttempt?o().cloneElement(r,m({},this.state)):o().createElement(g,m({},a,{ErrorComponent:u}))},t.defaultProps={ErrorComponent:o().createElement(s,null)},t}(o().Component),E=o().forwardRef((function(e,t){return o().createElement(w,m({},e,{innerRef:t}))})),S=n(6842),P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},P.apply(this,arguments)};function k(e){var t=e.config,n=e.children,u=e.api,c=e.pluginSDKOptions,i=(0,r.useMemo)((function(){return(0,a.initialize)(P({appsConfig:t,api:u,pluginLoaderOptions:P({postProcessManifest:function(e){return P(P({},e),{loadScripts:e.loadScripts.map((function(t){return""+e.baseURL+t}))})}},null==c?void 0:c.pluginLoaderOptions)},c))}),[]);return o().createElement(h.Provider,{value:{config:t,api:u,initialized:!0,pluginStore:i.pluginStore}},o().createElement(S.PluginStoreProvider,{store:i.pluginStore},n))}var x=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function u(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}i((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function O(e,t,n){var o=this,u=(0,r.useState)(n),c=u[0],i=u[1],l=(0,a.getScalprum)().pluginStore,s=(0,r.useCallback)((function(){return x(o,void 0,void 0,(function(){var n,r;return C(this,(function(o){switch(o.label){case 0:if(n=(0,a.getCachedModule)(e,t).cachedModule)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,l.getExposedModule(e,t)];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),console.error('Module not initialized! Module "'+t+'" was not found in "'+e+'" webpack scope. Make sure the remote container is loaded?'),[3,4];case 4:return[3,6];case 5:r=n,o.label=6;case 6:return i((function(){return r})),[2]}}))}))}),[e,t]);return(0,r.useEffect)((function(){s()}),[e,t]),c}var M=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function u(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}i((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function R(e,t){var n=this,o=e.scope,u=e.module,c=e.processor,i=(0,a.getAppData)(o).manifestLocation,l=(0,r.useState)(t),s=l[0],f=l[1],p=(0,r.useState)(),h=p[0],d=p[1],v=(0,a.getCachedModule)(o,u).cachedModule,y=(0,r.useRef)(!0),m=(0,a.getScalprum)().pluginStore;return(0,r.useEffect)((function(){if(y.current)if(v)try{m.getExposedModule(o,u).then((function(e){f((function(){return e}))}))}catch(e){d((function(){return e}))}else i&&(0,a.processManifest)(i,o,u,c).then((function(){return M(n,void 0,void 0,(function(){var e;return j(this,(function(t){switch(t.label){case 0:return[4,m.getExposedModule(o,u)];case 1:return e=t.sent(),f((function(){return e})),[2]}}))}))})).catch((function(e){d((function(){return e}))}));return function(){y.current=!1}}),[o,v]),[s,h]}var A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A.apply(this,arguments)},L={data:void 0,ready:!1,error:void 0},_=function(){var e=(0,r.useState)(L),t=e[0],n=e[1],o=(0,r.useContext)(f);return(0,r.useEffect)((function(){t.ready=!1,null==o||o.then((function(e){n(A(A({},t),{error:void 0,data:e,ready:!0}))})).catch((function(e){n(A(A({},t),{ready:!0,data:void 0,error:e}))}))}),[o]),t}},8446:(e,t,n)=>{var r=n(939);e.exports=function(e,t){return r(e,t)}}}]);
//# sourceMappingURL=../sourcemaps/174.e07a177e834884899f7325419d847909.js.map